# =============================================================================
# LEGAL ASSISTANT - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env to git!

# -----------------------------------------------------------------------------
# ENVIRONMENT
# -----------------------------------------------------------------------------
ENVIRONMENT=development  # development | staging | production
DEBUG=true
APP_NAME="Legal Assistant"
APP_VERSION="1.0.0"

# -----------------------------------------------------------------------------
# API SERVER
# -----------------------------------------------------------------------------
API__HOST=0.0.0.0
API__PORT=8000
API__WORKERS=4
API__RELOAD=true
API__CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]
API__SECRET_KEY=your-super-secret-jwt-key-min-32-chars-please-change-this
API__ACCESS_TOKEN_EXPIRE_MINUTES=30

# -----------------------------------------------------------------------------
# LLM PROVIDERS
# -----------------------------------------------------------------------------
# OpenAI (Primary)
LLM__OPENAI_API_KEY=sk-...your-openai-api-key...
LLM__OPENAI_MODEL=gpt-4-turbo-preview
LLM__OPENAI_TEMPERATURE=0.1
LLM__OPENAI_MAX_TOKENS=2048

# Anthropic (Fallback - Optional)
LLM__ANTHROPIC_API_KEY=sk-ant-...your-anthropic-key...
LLM__ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# Embeddings
LLM__EMBEDDING_MODEL=text-embedding-3-large
LLM__EMBEDDING_DIMENSIONS=3072
LLM__EMBEDDING_BATCH_SIZE=100

# Rate Limits
LLM__LLM_REQUESTS_PER_MINUTE=60
LLM__LLM_TOKENS_PER_DAY=1000000

# -----------------------------------------------------------------------------
# LLAMAPARSE
# -----------------------------------------------------------------------------
LLAMAPARSE__LLAMAPARSE_API_KEY=llx_...your-llamaparse-key...
LLAMAPARSE__LLAMAPARSE_TIMEOUT=60
LLAMAPARSE__LLAMAPARSE_MAX_PAGES=100
LLAMAPARSE__LLAMAPARSE_RESULT_TYPE=markdown

# Vision Fallback
LLAMAPARSE__USE_VISION_FALLBACK=true
LLAMAPARSE__VISION_TIMEOUT=30

# OCR Fallback
LLAMAPARSE__USE_OCR_FALLBACK=true
LLAMAPARSE__TESSERACT_LANG=rus+eng

# -----------------------------------------------------------------------------
# QDRANT VECTOR DATABASE
# -----------------------------------------------------------------------------
QDRANT__QDRANT_URL=http://localhost:6333
# QDRANT__QDRANT_API_KEY=your-qdrant-cloud-key  # Only for Qdrant Cloud

# Collections
QDRANT__COLLECTION_NAME=legal_documents
QDRANT__IMAGE_COLLECTION_NAME=legal_images

# Vector Config
QDRANT__VECTOR_SIZE=3072
QDRANT__DISTANCE_METRIC=cosine

# HNSW Index
QDRANT__HNSW_M=16
QDRANT__HNSW_EF_CONSTRUCT=200

# Search
QDRANT__TOP_K=20
QDRANT__RERANK_TOP_K=5
QDRANT__SCORE_THRESHOLD=0.5

# -----------------------------------------------------------------------------
# COHERE (Reranking)
# -----------------------------------------------------------------------------
COHERE__COHERE_API_KEY=your-cohere-api-key
COHERE__COHERE_MODEL=rerank-multilingual-v3.0
COHERE__COHERE_TIMEOUT=10

# -----------------------------------------------------------------------------
# REDIS (Caching & Rate Limiting)
# -----------------------------------------------------------------------------
REDIS__REDIS_URL=redis://localhost:6379/0
# REDIS__REDIS_PASSWORD=your-redis-password  # If authentication enabled

# Rate Limiting
REDIS__RATE_LIMIT_WINDOW=60
REDIS__RATE_LIMIT_MAX_REQUESTS=10

# Caching
REDIS__CACHE_TTL=3600
REDIS__CACHE_EMBEDDINGS=true

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
SECURITY__ENABLE_PII_DETECTION=true
SECURITY__PII_ENTITIES=["PERSON", "EMAIL_ADDRESS", "PHONE_NUMBER", "LOCATION", "ORGANIZATION"]

# Input Validation
SECURITY__MAX_FILE_SIZE_MB=50
SECURITY__ALLOWED_FILE_TYPES=[".pdf", ".png", ".jpg", ".jpeg", ".tiff"]
SECURITY__MAX_QUERY_LENGTH=1000

# Malware Scanning (requires ClamAV)
SECURITY__ENABLE_MALWARE_SCAN=false

# -----------------------------------------------------------------------------
# MONITORING & OBSERVABILITY
# -----------------------------------------------------------------------------
# LangSmith
MONITORING__LANGSMITH_API_KEY=ls__...your-langsmith-key...
MONITORING__LANGSMITH_PROJECT=legal-assistant-prod
MONITORING__ENABLE_LANGSMITH=true

# Prometheus
MONITORING__ENABLE_PROMETHEUS=true
MONITORING__PROMETHEUS_PORT=9090

# Logging
MONITORING__LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL
MONITORING__LOG_FORMAT=json  # json | console
# MONITORING__LOG_FILE=/var/log/legal-assistant/app.log  # Optional

# -----------------------------------------------------------------------------
# EVALUATION
# -----------------------------------------------------------------------------
EVALUATION__ENABLE_RAGAS=true
EVALUATION__RAGAS_BATCH_SIZE=10
EVALUATION__TEST_DATASET_PATH=data/test_datasets
EVALUATION__JUDGE_MODEL=gpt-4-turbo-preview

# HITL (Human-in-the-Loop)
EVALUATION__ENABLE_HITL=true
EVALUATION__HITL_CONFIDENCE_THRESHOLD=0.7

# -----------------------------------------------------------------------------
# CHUNKING
# -----------------------------------------------------------------------------
CHUNKING__CHUNK_SIZE=512
CHUNKING__CHUNK_OVERLAP=128
CHUNKING__SENTENCE_WINDOW_SIZE=3
CHUNKING__PRESERVE_CLAUSE_BOUNDARIES=true

# =============================================================================
# DOCKER-SPECIFIC (for docker-compose)
# =============================================================================
# These are used by docker-compose.yml

# Qdrant
QDRANT_VERSION=v1.7.4
QDRANT_PORT=6333

# Redis
REDIS_VERSION=7-alpine
REDIS_PORT=6379

# Postgres (for future use)
POSTGRES_VERSION=15-alpine
POSTGRES_USER=legal_assistant
POSTGRES_PASSWORD=change-this-password
POSTGRES_DB=legal_assistant
POSTGRES_PORT=5432
